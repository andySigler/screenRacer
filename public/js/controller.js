////////////////////////////////////////////////
////////////////////////////////////////////////
////////////////////////////////////////////////

var speed = 0;
var y = .5;

var socket = io.connect();

var color = '#'+RGB2HTML(rand(255),rand(255),rand(255));
document.body.style.background = color;

socket.on('id',function(data){
	socket.emit('id',{'id':'user','color':color});
});

socket.on('update',function(data){
	socket.emit('update',{'speed':speed,'y':y});
	document.getElementById('test').innerHTML = 'speed: '+speed+' - y: '+y;
});

////////////////////////////////////////////////
////////////////////////////////////////////////
////////////////////////////////////////////////

window.ondeviceorientation = function(event) {
	y = (event.beta+90)/180;
	speed = event.gamma/90;
};

////////////////////////////////////////////////
////////////////////////////////////////////////
////////////////////////////////////////////////

function RGB2HTML(red, green, blue){
    var decColor = red + 256 * green + 65536 * blue;
    return decColor.toString(16);
}

function rand(max){
	return Math.floor(Math.random()*max);
}

//////////////////////////////////////////////////
//////////////////////////////////////////////////
//////////////////////////////////////////////////